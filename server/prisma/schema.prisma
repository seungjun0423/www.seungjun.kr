
generator client {
  provider = "prisma-client-js"
	output = "./"
}

//데이터 베이스 연동
datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id    Int     @default(autoincrement()) @id
  email String  @unique
	password String
	token String?
	isAdmin Boolean @default(false)
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	profile Profile[]
	comment Comment[]
	admin Admin[]
}

model Admin {
	id    Int     @id @default(autoincrement())
	userId Int
	user   User  @relation(fields: [userId], references: [id])
}

model Profile {
	id    Int     @default(autoincrement()) @id
	img String?
	description String?
	nickname String
	userId Int
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
  user   User  @relation(fields: [userId], references: [id])
}

model Category {
	id Int @id @default(autoincrement()) 
	title String
	posts Post[]
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
}

model Post {
	id    Int     @id @default(autoincrement())
	title String
	contents String @db.LongText
	desc String?
	categoryId Int
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	category Category @relation(fields: [categoryId], references: [id])
	comment Comment[]
}

model Comment {
	id Int @default(autoincrement()) @id
	userId Int
	postId Int 
	contents String
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	post Post @relation(fields: [postId], references: [id])
	user   User  @relation(fields: [userId], references: [id])
}
